/* MessageLightbox custom styles */

/* Prevent page scroll when lightbox is open */
body.lightbox-open {
  overflow: hidden;
}

/* Ensure lightbox container doesn't cause layout shift */
.lightbox-content-scroll {
  /* Smooth scrolling within the lightbox */
  scroll-behavior: smooth;
}

/* KaTeX math rendering styles */
.message-content .katex {
  font-size: 1.1em;
}

.message-content .katex-display {
  margin: 1.5rem 0;
  padding: 1rem;
  background-color: rgba(31, 41, 55, 0.5);
  border-radius: 0.5rem;
  border-left: 3px solid #3b82f6;
  overflow-x: auto;
}

.message-content .katex-display > .katex {
  text-align: center;
  display: block;
}

/* Inline math styling */
.message-content .math-inline {
  padding: 0.1rem 0.2rem;
  background-color: rgba(31, 41, 55, 0.3);
  border-radius: 0.25rem;
}

/* Improve KaTeX font rendering */
.message-content .katex .mathnormal {
  font-style: italic;
}

/* Code blocks with better contrast */
.message-content pre {
  background-color: #1f2937 !important;
  border: 1px solid #374151;
}

.message-content code:not(.katex-mathml code) {
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
}

/* Ensure proper spacing around math */
.message-content p:has(.katex) {
  line-height: 2;
}

/* Better handling of long equations */
.message-content .katex-display .katex-html {
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
}

/* Improve readability of fractions and subscripts */
.message-content .katex .vlist-t {
  vertical-align: baseline;
}

/* Math in lists */
.message-content li .katex {
  vertical-align: middle;
}

/* Scrollbar styling for code and math blocks */
.message-content pre::-webkit-scrollbar,
.message-content .katex-display::-webkit-scrollbar {
  height: 8px;
  background-color: rgba(55, 65, 81, 0.5);
  border-radius: 4px;
}

.message-content pre::-webkit-scrollbar-thumb,
.message-content .katex-display::-webkit-scrollbar-thumb {
  background-color: rgba(107, 114, 128, 0.8);
  border-radius: 4px;
}

.message-content pre::-webkit-scrollbar-thumb:hover,
.message-content .katex-display::-webkit-scrollbar-thumb:hover {
  background-color: rgba(156, 163, 175, 0.9);
}

/* Improve contrast for KaTeX in dark mode */
.message-content .katex {
  color: #e5e7eb;
}

.message-content .katex .mord,
.message-content .katex .mop,
.message-content .katex .mbin,
.message-content .katex .mrel {
  color: #f3f4f6;
}

/* Special styling for equation arrays and matrices */
.message-content .katex .arraycolsep {
  width: 0.5em;
}

/* Ensure proper rendering of square roots and other tall elements */
.message-content .katex .sqrt > .vlist-t {
  border-color: #9ca3af;
}

/* Improve delimiter (bracket, parenthesis) visibility */
.message-content .katex .delimsizing,
.message-content .katex .delim-size1,
.message-content .katex .delim-size2,
.message-content .katex .delim-size3,
.message-content .katex .delim-size4 {
  color: #93c5fd;
}

/* Better spacing for display math in paragraphs */
.message-content p + .katex-display,
.message-content .katex-display + p {
  margin-top: 1rem;
}
